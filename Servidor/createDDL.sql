CREATE SEQUENCE seq_saldo_historico INCREMENT BY 50 START WITH 1000000
CREATE TABLE Accion (IDAccion  SERIAL NOT NULL, EQUIVALENTE BOOLEAN, NOMBRE VARCHAR(255), PEDIRHISTORICO BOOLEAN, SYMBOL VARCHAR(255), VALORACTUAL FLOAT, PRIMARY KEY (IDAccion))
CREATE TABLE Administrador (IDUsuario  SERIAL NOT NULL, Nombre VARCHAR(255), Password VARCHAR(255), PRIMARY KEY (IDUsuario))
CREATE TABLE Cliente (IDUsuario  SERIAL NOT NULL, fecharegistro TIMESTAMP, IDTELEFONO VARCHAR(255) UNIQUE, PORTAFOLIO_IDPortafolio BIGINT, PRIMARY KEY (IDUsuario))
CREATE TABLE ClientePaquete (CANTIDAD FLOAT, INVERSION FLOAT, IDPaq BIGINT NOT NULL, IDPortafolio BIGINT NOT NULL, PRIMARY KEY (IDPaq, IDPortafolio))
CREATE TABLE PREGUNTA (IDPreg  SERIAL NOT NULL, Pregunta_Tipo VARCHAR(31), SENTENCIAENG VARCHAR(255), SENTENCIAESP VARCHAR(255), PRIMARY KEY (IDPreg))
CREATE TABLE PreguntaEspecifica (IDPreg BIGINT NOT NULL, PAQUETE_IDPaq BIGINT, PRIMARY KEY (IDPreg))
CREATE TABLE PreguntaGeneral (IDPreg BIGINT NOT NULL, DEPRECATED BOOLEAN, PRIMARY KEY (IDPreg))
CREATE TABLE Paquete (IDPaq  SERIAL NOT NULL, Paquete_Tipo VARCHAR(31), DEPRECATED BOOLEAN, NOMBRE VARCHAR(255), primerfecha TIMESTAMP, PRIMARY KEY (IDPaq))
CREATE TABLE PaqueteAlgoritmico (IDPaq BIGINT NOT NULL, ALGORITMO VARCHAR(255), DISPONIBLE FLOAT, FECHACALCULO TIMESTAMP, INVERSION FLOAT, nominal FLOAT, acc_debug BIGINT, acc_historia BIGINT, acc_equivalente BIGINT, PRIMARY KEY (IDPaq))
CREATE TABLE PaqueteEST (IDPaq BIGINT NOT NULL, ALGORITMOEST VARCHAR(255), PRIMARY KEY (IDPaq))
CREATE TABLE PaqueteIndice (IDPaq BIGINT NOT NULL, PRIMARY KEY (IDPaq))
CREATE TABLE Historico (FECHA TIMESTAMP NOT NULL, ADJCLOSE FLOAT, CLOSE FLOAT, IDAccion BIGINT NOT NULL, PRIMARY KEY (FECHA, IDAccion))
CREATE TABLE PAQUETEACCION (INVERSION INTEGER, IDAccion BIGINT NOT NULL, IDPaq BIGINT NOT NULL, PRIMARY KEY (IDAccion, IDPaq))
CREATE TABLE Portafolio (IDPortafolio  SERIAL NOT NULL, activo BOOLEAN, historico BOOLEAN, perdio BOOLEAN, SININVERTIR FLOAT, ULTIMAFECHASALDO TIMESTAMP, ultimoacceso TIMESTAMP, ULTIMOSALDO FLOAT, PRIMARY KEY (IDPortafolio))
CREATE TABLE Respuesta (IDResp  SERIAL NOT NULL, Respuesta_Tipo VARCHAR(31), SENTENCIAENG VARCHAR(255), SENTENCIAESP VARCHAR(255), IDPreg BIGINT, PRIMARY KEY (IDResp))
CREATE TABLE PaqueteCategoria (IDPaqCategoria  SERIAL NOT NULL, CATEGORIA VARCHAR(255), DESCRIPCION VARCHAR(255), PRIMARY KEY (IDPaqCategoria))
CREATE TABLE RespuestaEspecifica (IDResp BIGINT NOT NULL, PUNTAJE INTEGER, PRIMARY KEY (IDResp))
CREATE TABLE RespuestaGeneral (IDResp BIGINT NOT NULL, PRIMARY KEY (IDResp))
CREATE TABLE ClienteAccion (IDCliAccion  SERIAL NOT NULL, CANTIDAD FLOAT, IdAccion BIGINT, Acc_IDPaq BIGINT, Acc_IDPortafolio BIGINT, PRIMARY KEY (IDCliAccion))
CREATE TABLE CATEGORY (ID  SERIAL NOT NULL, PRIMARY KEY (ID))
CREATE TABLE portafolio_saldohistorico (ID BIGINT NOT NULL, saldohistorico_key TIMESTAMP, saldohistorico FLOAT NOT NULL, portafolio_idportafolio BIGINT, PRIMARY KEY (ID))
CREATE TABLE Cliente_Respuesta (IDUsuario BIGINT NOT NULL, IDResp BIGINT NOT NULL, PRIMARY KEY (IDUsuario, IDResp))
CREATE TABLE Paquete_PAQUETEACCION (IDPaq BIGINT NOT NULL, IDPaqac BIGINT NOT NULL, IDAccion BIGINT NOT NULL, PRIMARY KEY (IDPaq, IDPaqac, IDAccion))
CREATE TABLE Paquete_PaqueteCategoria (Paquete_IDPaq BIGINT NOT NULL, categorias_IDPaqCategoria BIGINT NOT NULL, PRIMARY KEY (Paquete_IDPaq, categorias_IDPaqCategoria))
CREATE TABLE RespuestaGeneral_PaqueteCategoria (IDResp BIGINT NOT NULL, IDPaqCategoria BIGINT NOT NULL, PRIMARY KEY (IDResp, IDPaqCategoria))
CREATE TABLE CATEGORY_CATEGORY (Category_ID BIGINT NOT NULL, children_ID BIGINT NOT NULL, PRIMARY KEY (Category_ID, children_ID))
ALTER TABLE Cliente ADD CONSTRAINT FK_Cliente_PORTAFOLIO_IDPortafolio FOREIGN KEY (PORTAFOLIO_IDPortafolio) REFERENCES Portafolio (IDPortafolio)
ALTER TABLE ClientePaquete ADD CONSTRAINT FK_ClientePaquete_IDPortafolio FOREIGN KEY (IDPortafolio) REFERENCES Portafolio (IDPortafolio)
ALTER TABLE ClientePaquete ADD CONSTRAINT FK_ClientePaquete_IDPaq FOREIGN KEY (IDPaq) REFERENCES Paquete (IDPaq)
ALTER TABLE PreguntaEspecifica ADD CONSTRAINT FK_PreguntaEspecifica_PAQUETE_IDPaq FOREIGN KEY (PAQUETE_IDPaq) REFERENCES Paquete (IDPaq)
ALTER TABLE PreguntaEspecifica ADD CONSTRAINT FK_PreguntaEspecifica_IDPreg FOREIGN KEY (IDPreg) REFERENCES PREGUNTA (IDPreg)
ALTER TABLE PreguntaGeneral ADD CONSTRAINT FK_PreguntaGeneral_IDPreg FOREIGN KEY (IDPreg) REFERENCES PREGUNTA (IDPreg)
ALTER TABLE PaqueteAlgoritmico ADD CONSTRAINT FK_PaqueteAlgoritmico_acc_debug FOREIGN KEY (acc_debug) REFERENCES Accion (IDAccion)
ALTER TABLE PaqueteAlgoritmico ADD CONSTRAINT FK_PaqueteAlgoritmico_acc_historia FOREIGN KEY (acc_historia) REFERENCES Accion (IDAccion)
ALTER TABLE PaqueteAlgoritmico ADD CONSTRAINT FK_PaqueteAlgoritmico_acc_equivalente FOREIGN KEY (acc_equivalente) REFERENCES Accion (IDAccion)
ALTER TABLE PaqueteAlgoritmico ADD CONSTRAINT FK_PaqueteAlgoritmico_IDPaq FOREIGN KEY (IDPaq) REFERENCES Paquete (IDPaq)
ALTER TABLE PaqueteEST ADD CONSTRAINT FK_PaqueteEST_IDPaq FOREIGN KEY (IDPaq) REFERENCES Paquete (IDPaq)
ALTER TABLE PaqueteIndice ADD CONSTRAINT FK_PaqueteIndice_IDPaq FOREIGN KEY (IDPaq) REFERENCES Paquete (IDPaq)
ALTER TABLE Historico ADD CONSTRAINT FK_Historico_IDAccion FOREIGN KEY (IDAccion) REFERENCES Accion (IDAccion)
ALTER TABLE PAQUETEACCION ADD CONSTRAINT FK_PAQUETEACCION_IDAccion FOREIGN KEY (IDAccion) REFERENCES Accion (IDAccion)
ALTER TABLE PAQUETEACCION ADD CONSTRAINT FK_PAQUETEACCION_IDPaq FOREIGN KEY (IDPaq) REFERENCES Paquete (IDPaq)
ALTER TABLE Respuesta ADD CONSTRAINT FK_Respuesta_IDPreg FOREIGN KEY (IDPreg) REFERENCES PREGUNTA (IDPreg)
ALTER TABLE RespuestaEspecifica ADD CONSTRAINT FK_RespuestaEspecifica_IDResp FOREIGN KEY (IDResp) REFERENCES Respuesta (IDResp)
ALTER TABLE RespuestaGeneral ADD CONSTRAINT FK_RespuestaGeneral_IDResp FOREIGN KEY (IDResp) REFERENCES Respuesta (IDResp)
ALTER TABLE ClienteAccion ADD CONSTRAINT FK_ClienteAccion_Acc_IDPaq FOREIGN KEY (Acc_IDPaq, Acc_IDPortafolio) REFERENCES ClientePaquete (IDPaq, IDPortafolio)
ALTER TABLE ClienteAccion ADD CONSTRAINT FK_ClienteAccion_IdAccion FOREIGN KEY (IdAccion) REFERENCES Accion (IDAccion)
ALTER TABLE portafolio_saldohistorico ADD CONSTRAINT FK_portafolio_saldohistorico_portafolio_idportafolio FOREIGN KEY (portafolio_idportafolio) REFERENCES Portafolio (IDPortafolio)
ALTER TABLE Cliente_Respuesta ADD CONSTRAINT FK_Cliente_Respuesta_IDResp FOREIGN KEY (IDResp) REFERENCES Respuesta (IDResp)
ALTER TABLE Cliente_Respuesta ADD CONSTRAINT FK_Cliente_Respuesta_IDUsuario FOREIGN KEY (IDUsuario) REFERENCES Cliente (IDUsuario)
ALTER TABLE Paquete_PAQUETEACCION ADD CONSTRAINT FK_Paquete_PAQUETEACCION_IDPaq FOREIGN KEY (IDPaq) REFERENCES Paquete (IDPaq)
ALTER TABLE Paquete_PAQUETEACCION ADD CONSTRAINT FK_Paquete_PAQUETEACCION_IDAccion FOREIGN KEY (IDAccion, IDPaqac) REFERENCES PAQUETEACCION (IDAccion, IDPaq)
ALTER TABLE Paquete_PaqueteCategoria ADD CONSTRAINT FK_Paquete_PaqueteCategoria_categorias_IDPaqCategoria FOREIGN KEY (categorias_IDPaqCategoria) REFERENCES PaqueteCategoria (IDPaqCategoria)
ALTER TABLE Paquete_PaqueteCategoria ADD CONSTRAINT FK_Paquete_PaqueteCategoria_Paquete_IDPaq FOREIGN KEY (Paquete_IDPaq) REFERENCES Paquete (IDPaq)
ALTER TABLE RespuestaGeneral_PaqueteCategoria ADD CONSTRAINT FK_RespuestaGeneral_PaqueteCategoria_IDResp FOREIGN KEY (IDResp) REFERENCES Respuesta (IDResp)
ALTER TABLE RespuestaGeneral_PaqueteCategoria ADD CONSTRAINT FK_RespuestaGeneral_PaqueteCategoria_IDPaqCategoria FOREIGN KEY (IDPaqCategoria) REFERENCES PaqueteCategoria (IDPaqCategoria)
ALTER TABLE CATEGORY_CATEGORY ADD CONSTRAINT FK_CATEGORY_CATEGORY_children_ID FOREIGN KEY (children_ID) REFERENCES CATEGORY (ID)
ALTER TABLE CATEGORY_CATEGORY ADD CONSTRAINT FK_CATEGORY_CATEGORY_Category_ID FOREIGN KEY (Category_ID) REFERENCES CATEGORY (ID)

